{"ast":null,"code":"import React,{createContext,useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";export const AuthContext=/*#__PURE__*/createContext();export const AuthProvider=_ref=>{let{children}=_ref;const[currentUser,setCurrentUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{const userInfo=JSON.parse(localStorage.getItem('userInfo'));if(userInfo){setCurrentUser(userInfo);}setLoading(false);},[]);const login=async(email,password)=>{try{const{data}=await axios.post('/api/users/login',{email,password});if(data.success){localStorage.setItem('userInfo',JSON.stringify(data.data));setCurrentUser(data.data);return{success:true};}}catch(error){var _error$response,_error$response$data;return{success:false,error:((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Failed to login'};}};const register=async(name,email,password)=>{try{const{data}=await axios.post('/api/users/register',{name,email,password});if(data.success){localStorage.setItem('userInfo',JSON.stringify(data.data));setCurrentUser(data.data);return{success:true};}}catch(error){var _error$response2,_error$response2$data;return{success:false,error:((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'Failed to register'};}};const logout=()=>{localStorage.removeItem('userInfo');setCurrentUser(null);};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{currentUser,login,register,logout,loading},children:children});};","map":{"version":3,"names":["React","createContext","useState","useEffect","axios","jsx","_jsx","AuthContext","AuthProvider","_ref","children","currentUser","setCurrentUser","loading","setLoading","userInfo","JSON","parse","localStorage","getItem","login","email","password","data","post","success","setItem","stringify","error","_error$response","_error$response$data","response","register","name","_error$response2","_error$response2$data","logout","removeItem","Provider","value"],"sources":["C:/Users/SHEIKH IBRAHIM/Desktop/autohaven/autohaven/client/src/context/AuthContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const userInfo = JSON.parse(localStorage.getItem('userInfo'));\r\n    if (userInfo) {\r\n      setCurrentUser(userInfo);\r\n    }\r\n    setLoading(false);\r\n  }, []);\r\n\r\n  const login = async (email, password) => {\r\n    try {\r\n      const { data } = await axios.post('/api/users/login', { email, password });\r\n      \r\n      if (data.success) {\r\n        localStorage.setItem('userInfo', JSON.stringify(data.data));\r\n        setCurrentUser(data.data);\r\n        return { success: true };\r\n      }\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.error || 'Failed to login',\r\n      };\r\n    }\r\n  };\r\n\r\n  const register = async (name, email, password) => {\r\n    try {\r\n      const { data } = await axios.post('/api/users/register', {\r\n        name,\r\n        email,\r\n        password,\r\n      });\r\n      \r\n      if (data.success) {\r\n        localStorage.setItem('userInfo', JSON.stringify(data.data));\r\n        setCurrentUser(data.data);\r\n        return { success: true };\r\n      }\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: error.response?.data?.error || 'Failed to register',\r\n      };\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    localStorage.removeItem('userInfo');\r\n    setCurrentUser(null);\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        currentUser,\r\n        login,\r\n        register,\r\n        logout,\r\n        loading,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}